<?xml version="1.0" encoding="utf-8"?>
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-08-07 Fri 17:27 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Data Sci Discover Project</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Ryan Greenup" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="style.css">
<script type="text/javascript" src="https://orgmode.org/org-info.js">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
// @license-end
</script>

<script type="text/javascript">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "3");
org_html_manager.set("LINK_HOME", "");
org_html_manager.set("LINK_UP", "");
org_html_manager.set("LOCAL_TOC", "1");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "underline");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "3");
org_html_manager.set("VIEW", "showall");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
// @license-end
</script>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.cacheClassElem = elem.className;
         elem.cacheClassTarget = target.className;
         target.className = "code-highlighted";
         elem.className   = "code-highlighted";
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(elem.cacheClassElem)
         elem.className = elem.cacheClassElem;
       if(elem.cacheClassTarget)
         target.className = elem.cacheClassTarget;
     }
    /*]]>*///-->
// @license-end
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">Data Sci Discover Project</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org8479880">1. Links</a></li>
<li><a href="#org6774fff">2. Proposal</a>
<ul>
<li><a href="#org4b3df34">2.1. Question</a></li>
<li><a href="#orgaeb7cb9">2.2. Working</a></li>
</ul>
</li>
<li><a href="#org1de28bf">3. Working</a>
<ul>
<li><a href="#implementing-page-rank-methods">3.1. Implementing Page Rank Method on a small graph</a>
<ul>
<li><a href="#example-graph">3.1.1. Example Graph</a></li>
<li><a href="#page-rank-random-surfer">3.1.2. Page Rank Random Surfer</a></li>
</ul>
</li>
<li><a href="#org2ebd575">3.2. Implementing Page Rank on a much Larger Graph</a>
<ul>
<li><a href="#orgfef0f3d">3.2.1. Creating the Probability Transition Matrix</a></li>
<li><a href="#org79ad4d4">3.2.2. Solving the Random Surfer via the Power Method</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<p>
:SlowDown:
</p>

<p>
<sup><a href="#citeproc_bib_item_1">1</a></sup>
</p>
<div id="outline-container-org8479880" class="outline-2">
<h2 id="org8479880"><span class="section-number-2">1</span> Links</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li></li>
<li><a href="laparkPowerWalk2013.pdf">Paper</a></li>
<li><a href="Proposal/Propsal.html">Research Proposal</a>
<a href="ImplementingPageRank/01PageRank.Rmd#MissingReference">Preliminary Implementation</a></li>
</ul>
</div>
</div>


<div id="outline-container-org6774fff" class="outline-2">
<h2 id="org6774fff"><span class="section-number-2">2</span> Proposal</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org4b3df34" class="outline-3">
<h3 id="org4b3df34"><span class="section-number-3">2.1</span> Question</h3>
<div class="outline-text-3" id="text-2-1">
<p>
<i>Can we determine the second eigenvalue from the method parameters? For PageRank, the second eigenvalue is equal to the smoothing parameter &alpha;</i>
</p>

<blockquote>
<p>
Yes. An open question for the Power Walk method is, can we determine the second eigenvalue from the method parameters? For PageRank, the second eigenvalue is equal to the smoothing parameter &alpha;. The second eigenvalue determines how long the algorithm takes to converge and how stable the solution is.
To begin, implement the method for computing PageRank and then the Power Walk. It can all be done using sparse matrices, so it only requires a fraction of the memory and is each iteration is quick.
</p>
</blockquote>
</div>
</div>

<div id="outline-container-orgaeb7cb9" class="outline-3">
<h3 id="orgaeb7cb9"><span class="section-number-3">2.2</span> Working</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Take the exemplar Graph from Figure 1:
</p>


<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>Code to Generate DOT Graph</label><pre class="src src-plantuml" id="org33eb7ed"># #+begin_src javascript :exports code
@startdot
strict digraph graphName {
concentrate=true
fillcolor=green
color=blue
style="filled, rounded"
 A [shape=box, fillcolor="#a31621", style="rounded, filled"]

 edge [
    arrowhead="none"
  ];

 node[
    fontname="Fira Code",
    shape="square",
    fixedsize=false,
    style=rounded
  ];


# A -&gt; B [dir="both"]
A -&gt; B
B [shape=box, fillcolor="#bfdbf7", style="rounded, filled"]
B -&gt; A
C [shape=box, fillcolor="#eaf4d3", style="rounded, filled"]
C -&gt; D
D [shape=box, fillcolor="#0f5257", style="rounded, filled"]
D -&gt; C
}
@enddot
</pre>
</div>


<div class="figure">
<p><img src="./Media/Example.png" alt="Example.png" />
</p>
</div>



<p>
\[\begin{aligned}
    \Gamma =  I - n D^{- 1}_B \\
\end{aligned}\]
</p>

<p>
Where we have the following:
</p>

<p>
$$\begin{aligned}
    &beta; &amp;= 10 <br />
    B &amp;= &beta;<sup>A</sup> <br />
    A &amp;=
</p>
    \begin{bmatrix}
0& 1& 0& 0 \\
1& 0& 0& 0 \\
0& 0& 0& 1 \\
0& 0& 1& 0
    \end{bmatrix} \\
     \implies
    B &= \begin{bmatrix}
     10 & 1 & 1 & 1 \\
     1 & 10 & 1 & 1 \\
     1 & 1 & 10 & 1 \\
     1 & 1 & 1 & 10 \\
     \end{bmatrix}  \\
     \text{$D_B$ is a diagonal matrix of the column sums:}\\
     D &= \begin{bmatrix}
     13 & 0 & 0 & 0 \\
     0 & 13 & 0 & 0 \\
     0 & 0 & 13 & 0 \\
     0 & 0 & 0 & 13
     \end{bmatrix}  \\
     \text{Hence the Inverse is:}\\
     D_B^{-1}&= \frac{I}{13}\\
     \text{Putting it all together:}\\
     \Gamma &=  I - n D^{- 1}_B \\
     &= I - \frac{4 \cdot I}{13} \\
     &= \frac{9}{13} \cdot  I \\
     &= \begin{bmatrix}
         \frac{9}{13} & 0 & 0 & 0 \\
         0 & \frac{9}{13} & 0 & 0 \\
         0 & 0 & \frac{9}{13} & 0 \\
         0 & 0 & 0 &  \frac{9}{13}
     \end{bmatrix}  \\
     & \approx \begin{bmatrix}
         0.6923 & 0 & 0 & 0 \\
         0 & 0.6923 & 0 & 0 \\
         0 & 0 & 0.6923 & 0 \\
         0 & 0 & 0 & 0.6923
     \end{bmatrix}



<p>
\end{aligned}$$
</p>




<p>
\* References
This section is necessary for references to work in <i>HTML</i> export, however it breaks LaTeX export because that relies on BibLaTex NOT BibTex which this is for.
</p>

<p>
Org-ref hasn&rsquo;t been updated to allow a way to use HTML references with the syntax for biblatex.
</p>

<p>
The Auto Sync is handled from inside
</p>

<p>
+<a id="org656d8bb"></a>

</p>

<p>
<a id="orge3eb87a"></a>
</p>

<style>.csl-left-margin{float: left; padding-right: 0em;} .csl-right-inline{margin: 0 0 0 1.2em;}</style><h2 class='citeproc-org-bib-h2'>Bibliography</h2>
<div class="csl-bib-body">
  <div class="csl-entry"><a name="citeproc_bib_item_1"></a>
    <div class="csl-left-margin">1.</div><div class="csl-right-inline">Kamvar, S., Haveliwala, T. &#38; Golub, G. Adaptive Methods for the Computation of PageRank. <b>386</b>, 51–65.</div>
  </div>
</div>

<p>
#+end<sub>example</sub>
</p>
</div>
</div>
</div>

<div id="outline-container-org1de28bf" class="outline-2">
<h2 id="org1de28bf"><span class="section-number-2">3</span> Working</h2>
<div class="outline-text-2" id="text-3">
<div class="org-src-container">
<pre class="src src-R">  <span style="color: #20b2aa; font-weight: bold;">if</span> (<span style="color: #1e90ff;">require</span>(<span style="color: #ffa07a;">"pacman"</span>)) {
      <span style="color: #1e90ff;">library</span>(pacman)
    }<span style="color: #20b2aa; font-weight: bold;">else</span>{
      install.packages(<span style="color: #ffa07a;">"pacman"</span>)
      <span style="color: #1e90ff;">library</span>(pacman)
    }
</pre>
</div>
<div class="org-src-container">
<pre class="src src-R">    pacman::p_load(tidyverse, Matrix, igraph, plotly, mise, docstring)
</pre>
</div>
</div>

<div id="outline-container-implementing-page-rank-methods" class="outline-3">
<h3 id="implementing-page-rank-methods"><span class="section-number-3">3.1</span> Implementing Page Rank Method on a small graph</h3>
<div class="outline-text-3" id="text-implementing-page-rank-methods">
</div>

<div id="outline-container-example-graph" class="outline-4">
<h4 id="example-graph"><span class="section-number-4">3.1.1</span> Example Graph</h4>
<div class="outline-text-4" id="text-example-graph">
<p>
Consider the following Graph taken from the paper:
</p>

<div class="org-src-container">
<pre class="src src-R">  g1 <span style="color: #1e90ff;">&lt;-</span> igraph::graph.formula(<span style="color: #1e90ff;">1</span>++<span style="color: #1e90ff;">2</span>, <span style="color: #1e90ff;">1</span>+-<span style="color: #1e90ff;">8</span>, <span style="color: #1e90ff;">1</span>+-<span style="color: #1e90ff;">5</span>, <span style="color: #1e90ff;">2</span>+-<span style="color: #1e90ff;">5</span>, <span style="color: #1e90ff;">2</span>+-<span style="color: #1e90ff;">7</span>, <span style="color: #1e90ff;">2</span>+-<span style="color: #1e90ff;">8</span>, <span style="color: #1e90ff;">2</span>+-<span style="color: #1e90ff;">6</span>, <span style="color: #1e90ff;">2</span>+-<span style="color: #1e90ff;">9</span>, <span style="color: #1e90ff;">3</span>++<span style="color: #1e90ff;">4</span>, <span style="color: #1e90ff;">3</span>+-<span style="color: #1e90ff;">5</span>, <span style="color: #1e90ff;">3</span>+-<span style="color: #1e90ff;">6</span>, <span style="color: #1e90ff;">3</span>+-<span style="color: #1e90ff;">9</span>, <span style="color: #1e90ff;">3</span>+-<span style="color: #1e90ff;">10</span>, <span style="color: #1e90ff;">4</span>+-<span style="color: #1e90ff;">9</span>, <span style="color: #1e90ff;">4</span>+-<span style="color: #1e90ff;">10</span>, <span style="color: #1e90ff;">4</span>+-<span style="color: #1e90ff;">5</span>, <span style="color: #1e90ff;">5</span>+-<span style="color: #1e90ff;">8</span>, <span style="color: #1e90ff;">6</span>+-<span style="color: #1e90ff;">8</span>, <span style="color: #1e90ff;">7</span>+-<span style="color: #1e90ff;">8</span>)
  plot(g1)
</pre>
</div>


<div class="figure">
<p><img src="ImplementingPageRank/01PageRank_files/figure-html/unnamed-chunk-2-1.png" alt="unnamed-chunk-2-1.png" />
</p>
</div>
</div>

<ol class="org-ol">
<li><a id="adjacency-matrix"></a>Adjacency Matrix<br />
<div class="outline-text-5" id="text-adjacency-matrix">
<p>
The adjacency Matrix is given by:
</p>

<div class="org-src-container">
<pre class="src src-R">  A <span style="color: #1e90ff;">&lt;-</span> igraph::get.adjacency(g1, names = <span style="color: #9370db;">TRUE</span>, sparse = <span style="color: #9370db;">FALSE</span>) <span style="color: #1e90ff;">%&gt;%</span>
    as.matrix()

  <span style="color: #cd853f;">## </span><span style="color: #cd853f;">Adjust the Order</span>
  (A <span style="color: #1e90ff;">&lt;-</span> A[order(as.integer(row.names(A))), order(as.integer(colnames(A)))])
</pre>
</div>

<pre class="example">
  ##    1 2 3 4 5 6 7 8 9 10
  ## 1  0 1 0 0 0 0 0 0 0  0
  ## 2  1 0 0 0 0 0 0 0 0  0
  ## 3  0 0 0 1 0 0 0 0 0  0
  ## 4  0 0 1 0 0 0 0 0 0  0
  ## 5  1 1 1 1 0 0 0 0 0  0
  ## 6  0 1 1 0 0 0 0 0 0  0
  ## 7  0 1 0 0 0 0 0 0 0  0
  ## 8  1 1 0 0 1 1 1 0 0  0
  ## 9  0 1 1 1 0 0 0 0 0  0
  ## 10 0 0 1 1 0 0 0 0 0  0
</pre>
</div>
</li>

<li><a id="state-distribution"></a>State Distribution<br />
<div class="outline-text-5" id="text-state-distribution">
<p>
The state distribution is the transpose of the adjacency matrix:
</p>

<div class="org-src-container">
<pre class="src src-R">  (p0 <span style="color: #1e90ff;">&lt;-</span> t(A))
</pre>
</div>

<pre class="example">
  ##    1 2 3 4 5 6 7 8 9 10
  ## 1  0 1 0 0 1 0 0 1 0  0
  ## 2  1 0 0 0 1 1 1 1 1  0
  ## 3  0 0 0 1 1 1 0 0 1  1
  ## 4  0 0 1 0 1 0 0 0 1  1
  ## 5  0 0 0 0 0 0 0 1 0  0
  ## 6  0 0 0 0 0 0 0 1 0  0
  ## 7  0 0 0 0 0 0 0 1 0  0
  ## 8  0 0 0 0 0 0 0 0 0  0
  ## 9  0 0 0 0 0 0 0 0 0  0
  ## 10 0 0 0 0 0 0 0 0 0  0
</pre>
</div>
</li>

<li><a id="probability-transition-matrix"></a>Probability Transition Matrix<br />
<div class="outline-text-5" id="text-probability-transition-matrix">
<p>
The probability transition matrix is such that each column of the
initial state distribution (i.e. the transposed adjacency matrix) is
scaled to 1.
</p>

<div class="org-src-container">
<pre class="src src-R">  p0 <span style="color: #1e90ff;">%*%</span> diag(<span style="color: #1e90ff;">1</span>/colSums(p0))
</pre>
</div>

<pre class="example">
  ##    [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]      [,9] [,10]
  ## 1     0    1    0    0 0.25  0.0    0  0.2 0.0000000   0.0
  ## 2     1    0    0    0 0.25  0.5    1  0.2 0.3333333   0.0
  ## 3     0    0    0    1 0.25  0.5    0  0.0 0.3333333   0.5
  ## 4     0    0    1    0 0.25  0.0    0  0.0 0.3333333   0.5
  ## 5     0    0    0    0 0.00  0.0    0  0.2 0.0000000   0.0
  ## 6     0    0    0    0 0.00  0.0    0  0.2 0.0000000   0.0
  ## 7     0    0    0    0 0.00  0.0    0  0.2 0.0000000   0.0
  ## 8     0    0    0    0 0.00  0.0    0  0.0 0.0000000   0.0
  ## 9     0    0    0    0 0.00  0.0    0  0.0 0.0000000   0.0
  ## 10    0    0    0    0 0.00  0.0    0  0.0 0.0000000   0.0
</pre>
</div>

<ol class="org-ol">
<li><a id="create-a-function"></a>Create a Function<br />
<div class="outline-text-6" id="text-create-a-function">
<div class="org-src-container">
<pre class="src src-R">  <span style="color: #00ff7f;">adj_to_probTrans</span> <span style="color: #1e90ff;">&lt;-</span> <span style="color: #20b2aa; font-weight: bold;">function</span>(adjMat) {
    t(adjMat) <span style="color: #1e90ff;">%*%</span> diag(<span style="color: #1e90ff;">1</span>/colSums(t(adjMat)))
  }

  (T <span style="color: #1e90ff;">&lt;-</span> adj_to_probTrans(A)) <span style="color: #1e90ff;">%&gt;%</span> round(<span style="color: #1e90ff;">2</span>)
</pre>
</div>

<pre class="example">
  ##    [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
  ## 1     0    1    0    0 0.25  0.0    0  0.2 0.00   0.0
  ## 2     1    0    0    0 0.25  0.5    1  0.2 0.33   0.0
  ## 3     0    0    0    1 0.25  0.5    0  0.0 0.33   0.5
  ## 4     0    0    1    0 0.25  0.0    0  0.0 0.33   0.5
  ## 5     0    0    0    0 0.00  0.0    0  0.2 0.00   0.0
  ## 6     0    0    0    0 0.00  0.0    0  0.2 0.00   0.0
  ## 7     0    0    0    0 0.00  0.0    0  0.2 0.00   0.0
  ## 8     0    0    0    0 0.00  0.0    0  0.0 0.00   0.0
  ## 9     0    0    0    0 0.00  0.0    0  0.0 0.00   0.0
  ## 10    0    0    0    0 0.00  0.0    0  0.0 0.00   0.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</div>

<div id="outline-container-page-rank-random-surfer" class="outline-4">
<h4 id="page-rank-random-surfer"><span class="section-number-4">3.1.2</span> Page Rank Random Surfer</h4>
<div class="outline-text-4" id="text-page-rank-random-surfer">
<p>
The random surfer page rank method modifies the probability transition
matrix \(T\) so that the method works also for non-ergodic graphs by
introducing the possibility of a random jump, we&rsquo;ll call the surfer
transition matrix \(S\):
</p>

\begin{align}
    S &= \lambda T +  \left( 1- \lambda \right)B :\\
\ \\
    B&= \begin{bmatrix}
    \frac{1}{N} & \frac{1}{N} & \ldots & \frac{1}{N} \\
    \frac{1}{N} & \frac{1}{N} & \ldots & \frac{1}{N} \\
        \vdots      & \vdots      & \ddots & \vdots \\
    \frac{1}{N} & \frac{1}{N} & \ldots & \frac{1}{N} \\
    \end{bmatrix}  \\
    N&= \left| \left| V \right| \right| \\
    \lambda &\in [0,1]
\end{align}

<div class="org-src-container">
<pre class="src src-R">  B <span style="color: #1e90ff;">&lt;-</span> matrix(rep(<span style="color: #1e90ff;">1</span>/nrow(T), length.out = nrow(T)**<span style="color: #1e90ff;">2</span>), nrow = nrow(T))
  l <span style="color: #1e90ff;">&lt;-</span> <span style="color: #1e90ff;">0.8</span>

  S <span style="color: #1e90ff;">&lt;-</span> l*T+(<span style="color: #1e90ff;">1</span>-l)*B
</pre>
</div>
</div>

<ol class="org-ol">
<li><a id="eigen-value-method"></a>Eigen Value Method<br />
<div class="outline-text-5" id="text-eigen-value-method">
<p>
The eigenvector corresponding to the the eigenvalue of 1 will be the
stationary point:
</p>

<div class="org-src-container">
<pre class="src src-R">  eigen(S, symmetric = <span style="color: #9370db;">FALSE</span>)
</pre>
</div>

<pre class="example">
  ## eigen() decomposition
  ## $values
  ##  [1]  1.000000e+00  8.000000e-01 -8.000000e-01 -8.000000e-01  3.117428e-09
  ##  [6] -3.117428e-09  1.233252e-17 -6.831762e-18  1.351981e-18  1.827902e-34
  ##
  ## $vectors
  ##              [,1]          [,2]          [,3]          [,4]          [,5]
  ##  [1,] -0.48531271  5.000000e-01  1.074642e-03  7.070996e-01  6.735753e-01
  ##  [2,] -0.52732002  5.000000e-01 -1.074642e-03 -7.070996e-01  9.622505e-02
  ##  [3,] -0.49152601 -5.000000e-01  7.071060e-01  3.197134e-03  9.622505e-02
  ##  [4,] -0.47977477 -5.000000e-01 -7.071060e-01 -3.197134e-03  2.886751e-01
  ##  [5,] -0.05288058  7.620569e-17  1.212133e-16 -3.419297e-18 -3.849002e-01
  ##  [6,] -0.05288058  7.620569e-17 -7.099634e-17 -3.419297e-18 -3.849002e-01
  ##  [7,] -0.05288058  7.620569e-17  2.943750e-17 -3.419297e-18 -3.849002e-01
  ##  [8,] -0.04558671  6.926804e-17 -1.948070e-18 -4.183296e-17 -7.499367e-09
  ##  [9,] -0.04558671  6.926804e-17  7.359376e-18 -4.183296e-17 -7.499367e-09
  ## [10,] -0.04558671  6.926804e-17  7.359376e-18 -4.183296e-17 -7.499367e-09
  ##                [,6]          [,7]          [,8]          [,9]         [,10]
  ##  [1,] -6.735753e-01 -2.658112e-01  5.357798e-01 -4.171123e-01  2.122431e-01
  ##  [2,] -9.622504e-02  1.896313e-01 -1.330801e-01 -7.334472e-02  1.241240e-01
  ##  [3,] -9.622504e-02  1.990137e-01 -1.665251e-01  2.591495e-01 -1.598069e-04
  ##  [4,] -2.886751e-01 -3.972519e-02  1.099005e-02 -1.886035e-02  6.690506e-02
  ##  [5,]  3.849002e-01 -7.585250e-01  5.323206e-01  2.933789e-01 -4.964959e-01
  ##  [6,]  3.849002e-01  4.774778e-01 -3.550303e-01  5.560197e-01 -1.341297e-01
  ##  [7,]  3.849002e-01  2.204565e-01 -5.047228e-01  1.987554e-01  1.561493e-01
  ##  [8,] -7.499367e-09 -1.208463e-16  1.668414e-16 -2.685569e-16  3.416862e-17
  ##  [9,] -7.499367e-09 -1.125898e-02  4.013399e-02 -3.989931e-01 -5.316106e-01
  ## [10,] -7.499367e-09 -1.125898e-02  4.013399e-02 -3.989931e-01  6.029746e-01
</pre>

<p>
So in this case <del>the</del> a stationary point is
\(\langle -0.49, -0.53, -0.49, -0.48, -0.05, -0.05, -0.05, -0.04, -0.04, -0.04 \rangle\)
</p>

<p>
which can be verified:
</p>

<p>
\[
1 \vec{p} = S\vec{p}
\]
</p>

<div class="org-src-container">
<pre class="src src-R">  (p     <span style="color: #1e90ff;">&lt;-</span> eigen(S)$values[<span style="color: #1e90ff;">1</span>] * eigen(S)$vectors[,<span style="color: #1e90ff;">1</span>])
</pre>
</div>

<pre class="example">
  ##  [1] -0.48531271 -0.52732002 -0.49152601 -0.47977477 -0.05288058 -0.05288058
  ##  [7] -0.05288058 -0.04558671 -0.04558671 -0.04558671
</pre>

<div class="org-src-container">
<pre class="src src-R">  (p_new <span style="color: #1e90ff;">&lt;-</span> S <span style="color: #1e90ff;">%*%</span> p)
</pre>
</div>

<pre class="example">
  ##           [,1]
  ## 1  -0.48531271
  ## 2  -0.52732002
  ## 3  -0.49152601
  ## 4  -0.47977477
  ## 5  -0.05288058
  ## 6  -0.05288058
  ## 7  -0.05288058
  ## 8  -0.04558671
  ## 9  -0.04558671
  ## 10 -0.04558671
</pre>

<p>
However this vector does not sum to 1 so the scale should be adjusted
(for probabilities the vector should sum to 1):
</p>

<div class="org-src-container">
<pre class="src src-R">  (p_new <span style="color: #1e90ff;">&lt;-</span> p_new/sum(p_new))
</pre>
</div>

<pre class="example">
  ##         [,1]
  ## 1  0.2129185
  ## 2  0.2313481
  ## 3  0.2156444
  ## 4  0.2104889
  ## 5  0.0232000
  ## 6  0.0232000
  ## 7  0.0232000
  ## 8  0.0200000
  ## 9  0.0200000
  ## 10 0.0200000
</pre>
</div>
</li>

<li><a id="power-value-method"></a>Power Value Method<br />
<div class="outline-text-5" id="text-power-value-method">
<p>
Using the power method should give the same result, which it indeed
does, but for the scale:
</p>

<div class="org-src-container">
<pre class="src src-R">  p_new <span style="color: #1e90ff;">&lt;-</span> p_new *<span style="color: #1e90ff;">123456789</span>

  <span style="color: #20b2aa; font-weight: bold;">while</span> (sum(round(p, <span style="color: #1e90ff;">9</span>) != round(p_new, <span style="color: #1e90ff;">9</span>))) {
      (p     <span style="color: #1e90ff;">&lt;-</span> p_new)
      (p_new <span style="color: #1e90ff;">&lt;-</span> S <span style="color: #1e90ff;">%*%</span> p)
  }

  p_new
</pre>
</div>

<pre class="example">
  ##        [,1]
  ## 1  26286237
  ## 2  28561500
  ## 3  26622771
  ## 4  25986282
  ## 5   2864198
  ## 6   2864198
  ## 7   2864198
  ## 8   2469136
  ## 9   2469136
  ## 10  2469136
</pre>

<div class="org-src-container">
<pre class="src src-R">  p
</pre>
</div>

<pre class="example">
  ##        [,1]
  ## 1  26286237
  ## 2  28561500
  ## 3  26622771
  ## 4  25986282
  ## 5   2864198
  ## 6   2864198
  ## 7   2864198
  ## 8   2469136
  ## 9   2469136
  ## 10  2469136
</pre>

<p>
This answer is however identical in direction, if it scaled to 1 the
same value will be returned:
</p>

<div class="org-src-container">
<pre class="src src-R">  (p_new <span style="color: #1e90ff;">&lt;-</span> p_new/sum(p_new))
</pre>
</div>

<pre class="example">
  ##         [,1]
  ## 1  0.2129185
  ## 2  0.2313481
  ## 3  0.2156444
  ## 4  0.2104889
  ## 5  0.0232000
  ## 6  0.0232000
  ## 7  0.0232000
  ## 8  0.0200000
  ## 9  0.0200000
  ## 10 0.0200000
</pre>
</div>
</li>

<li><a id="scaling"></a>Scaling<br />
<div class="outline-text-5" id="text-scaling">
<p>
However if the initial state sums to 1, then the scale of the stationary
vector will also sum to 1.
</p>

<div class="org-src-container">
<pre class="src src-R">  p     <span style="color: #1e90ff;">&lt;-</span> c(<span style="color: #1e90ff;">1</span>, <span style="color: #1e90ff;">0</span>, <span style="color: #1e90ff;">0</span>, <span style="color: #1e90ff;">0</span>, <span style="color: #1e90ff;">0</span>, <span style="color: #1e90ff;">0</span>, <span style="color: #1e90ff;">0</span>, <span style="color: #1e90ff;">0</span>, <span style="color: #1e90ff;">0</span>, <span style="color: #1e90ff;">0</span>)
  p_new <span style="color: #1e90ff;">&lt;-</span> S <span style="color: #1e90ff;">%*%</span> p

  <span style="color: #20b2aa; font-weight: bold;">while</span> (sum(round(p, <span style="color: #1e90ff;">9</span>) != round(p_new, <span style="color: #1e90ff;">9</span>))) {
      (p     <span style="color: #1e90ff;">&lt;-</span> p_new)
      (p_new <span style="color: #1e90ff;">&lt;-</span> S <span style="color: #1e90ff;">%*%</span> p)
  }

  cbind(p_new, p)
</pre>
</div>

<pre class="example">
  ##         [,1]      [,2]
  ## 1  0.2129185 0.2129185
  ## 2  0.2313481 0.2313481
  ## 3  0.2156444 0.2156444
  ## 4  0.2104889 0.2104889
  ## 5  0.0232000 0.0232000
  ## 6  0.0232000 0.0232000
  ## 7  0.0232000 0.0232000
  ## 8  0.0200000 0.0200000
  ## 9  0.0200000 0.0200000
  ## 10 0.0200000 0.0200000
</pre>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-org2ebd575" class="outline-3">
<h3 id="org2ebd575"><span class="section-number-3">3.2</span> Implementing Page Rank on a much Larger Graph</h3>
<div class="outline-text-3" id="text-3-2">
</div>
<div id="outline-container-orgfef0f3d" class="outline-4">
<h4 id="orgfef0f3d"><span class="section-number-4">3.2.1</span> Creating the Probability Transition Matrix</h4>
<div class="outline-text-4" id="text-3-2-1">
<p>
Implementing the page rank method on a larger graph requires the use of more efficient form of matrix storage.
</p>

<p>
An adjacency matrix (atleast in the context of graphs relating to webpages and social networks) will contain elements that are mostly zero because the number of edges leaving any vertex will tend to be significantly less than the total number of vertices.
</p>

<p>
A matrix exhibiting this property is known as a sparse matrix CITE
</p>

<p>
The properties of a sparse matrix can be implemented in order to improve performance, one such method to acheive this is <i>Compressed Sparse Row</i> (CSR) storage, which involves creating a seperate array of values and corresponding indices. CITE
</p>

<p>
This is implemented by the Matrix package in <b><i>R</i></b>. CITE
</p>

<p>
An sparse matrix can be created using the following syntax, which will return a matrix of the class <code>dgCMatrix</code>:
</p>

<div class="org-src-container">
<pre class="src src-R"><span style="color: #1e90ff;">library</span>(Matrix)
<span style="color: #cd853f;">## </span><span style="color: #cd853f;">Create Example Matrix</span>
n <span style="color: #1e90ff;">&lt;-</span> <span style="color: #1e90ff;">20</span>
m <span style="color: #1e90ff;">&lt;-</span> <span style="color: #1e90ff;">10</span>^<span style="color: #1e90ff;">6</span>
i <span style="color: #1e90ff;">&lt;-</span> sample(<span style="color: #1e90ff;">1</span>:m, size = n); j <span style="color: #1e90ff;">&lt;-</span> sample(<span style="color: #1e90ff;">1</span>:m, size = n); x <span style="color: #1e90ff;">&lt;-</span> rpois(n, lambda = <span style="color: #1e90ff;">90</span>)
A <span style="color: #1e90ff;">&lt;-</span> sparseMatrix(i, j, x = x, dims = c(m, m))

summary(A)
</pre>
</div>

<pre class="example">

1000000 x 1000000 sparse Matrix of class "dgCMatrix", with 20 entries
        i      j   x
1  803589  66922 118
2   61426  83355  97
3  401058 103999  71
4  610432 206922  84
5  542888 217196  69
6  821769 291405  79
7  187782 364814  74
8  152229 451810 104
9  614645 462031  82
10 776459 566334  91
11 288279 630438  97
12 233553 631441  84
13 139900 649740  83
14 381442 681415  87
15 578270 755635  99
16 175521 775788  98
17  57981 809115  89
18 821120 809688 103
19 541818 976802  78
20 595348 993420  85
</pre>

<p>
As before in section <a href="#probability-transition-matrix">3.1.1.3</a>, the probability transition matrix can be found by:
</p>

<ol class="org-ol">
<li>Transposing the adjacency matrix, then</li>
<li>Scaling the columns to one</li>
</ol>

<p>
To implement this for a sparseMatrix of the class <code>dgCMatrix</code>, the same technique of multiplying by a diagonalised matrix may be implemented, however to create this new matrix, a new <code>sparseMatrix</code> will need to be created using the properties of the original matrix, this can be done like so:
</p>


<div class="org-src-container">
<pre class="src src-R"> <span style="color: #00ff7f;">sparse_diag</span> <span style="color: #1e90ff;">&lt;-</span> <span style="color: #20b2aa; font-weight: bold;">function</span>(mat) {
  <span style="color: #cd853f;">#</span><span style="color: #cd853f;">' Diagonal Factors of Sparse Matrix</span>
  <span style="color: #cd853f;">#</span><span style="color: #cd853f;">'</span>
  <span style="color: #cd853f;">#</span><span style="color: #cd853f;">' Return a Diagonal Matrix of the 1 / colsum() such that</span>
  <span style="color: #cd853f;">#</span><span style="color: #cd853f;">' matrix multiplication with this matrix would have all column sums</span>
  <span style="color: #cd853f;">#</span><span style="color: #cd853f;">' sum to 1</span>
  <span style="color: #cd853f;">#</span><span style="color: #cd853f;">'</span>
  <span style="color: #cd853f;">#</span><span style="color: #cd853f;">' This should take the transpose of an adjacency matrix in and the output</span>
  <span style="color: #cd853f;">#</span><span style="color: #cd853f;">' can be multiplied by the original matrix to scale it to 1.</span>
  <span style="color: #cd853f;">#</span><span style="color: #cd853f;">' i</span>

  <span style="color: #cd853f;">## </span><span style="color: #cd853f;">Get the Dimensions</span>
  n <span style="color: #1e90ff;">&lt;-</span> nrow(mat)

  <span style="color: #cd853f;">## </span><span style="color: #cd853f;">Make a Diagonal Matrix of Column Sums</span>
  D <span style="color: #1e90ff;">&lt;-</span> sparseMatrix(i = <span style="color: #1e90ff;">1</span>:n, j = <span style="color: #1e90ff;">1</span>:n, x = colSums(mat), dims = c(n,n))

  <span style="color: #cd853f;">## </span><span style="color: #cd853f;">Throw away explicit Zeroes</span>
  D <span style="color: #1e90ff;">&lt;-</span> drop0(D)

  <span style="color: #cd853f;">## </span><span style="color: #cd853f;">Inverse the Values</span>
  D@x <span style="color: #1e90ff;">&lt;-</span> <span style="color: #1e90ff;">1</span>/D@x

  <span style="color: #cd853f;">## </span><span style="color: #cd853f;">Return the Diagonal Matrix</span>
  <span style="color: #20b2aa; font-weight: bold;">return</span>(D)
}
D <span style="color: #1e90ff;">&lt;-</span> sparse_diag(t(A))
summary(D)
</pre>
</div>

<pre class="example">

1000000 x 1000000 sparse Matrix of class "dgCMatrix", with 20 entries
        i      j           x
1   57981  57981 0.011235955
2   61426  61426 0.010309278
3  139900 139900 0.012048193
4  152229 152229 0.009615385
5  175521 175521 0.010204082
6  187782 187782 0.013513514
7  233553 233553 0.011904762
8  288279 288279 0.010309278
9  381442 381442 0.011494253
10 401058 401058 0.014084507
11 541818 541818 0.012820513
12 542888 542888 0.014492754
13 578270 578270 0.010101010
14 595348 595348 0.011764706
15 610432 610432 0.011904762
16 614645 614645 0.012195122
17 776459 776459 0.010989011
18 803589 803589 0.008474576
19 821120 821120 0.009708738
20 821769 821769 0.012658228
</pre>

<p>
and hence the probability transition matrix may be implemented by performing matrix multiplication accordingly:
</p>

<div class="org-src-container">
<pre class="src src-R">summary(t(A) <span style="color: #1e90ff;">%*%</span> D)
</pre>
</div>

<pre class="example">
1000000 x 1000000 sparse Matrix of class "dgCMatrix", with 20 entries
        i      j x
1  809115  57981 1
2   83355  61426 1
3  649740 139900 1
4  451810 152229 1
5  775788 175521 1
6  364814 187782 1
7  631441 233553 1
8  630438 288279 1
9  681415 381442 1
10 103999 401058 1
11 976802 541818 1
12 217196 542888 1
13 755635 578270 1
14 993420 595348 1
15 206922 610432 1
16 462031 614645 1
17 566334 776459 1
18  66922 803589 1
19 809688 821120 1
20 291405 821769 1
</pre>
</div>
</div>

<div id="outline-container-org79ad4d4" class="outline-4">
<h4 id="org79ad4d4"><span class="section-number-4">3.2.2</span> Solving the Random Surfer via the Power Method</h4>
<div class="outline-text-4" id="text-3-2-2">
<p>
Solving the eigenvalues for such a large matrix will not feasible, instead the power method will need to be used to find the stationary point.
</p>

<p>
However, creating a matrix of background probabilites (denoted by <code>B</code> is section <a href="#page-rank-random-surfer">3.1.2</a>) will not be feasible, it would simply be too large, instead some algebra can be used to reduce \(B\) from a matrix into a vector containing only \(\frac{1-\alpha}{N}\).
</p>

<p>
The power method is given by:
</p>

\begin{align}
\vec{p}= \mathbf{S} \vec{p}
\end{align}

<p>
where:
</p>

\begin{align}
S &= \alpha \mathbf{T} +  \left( 1 - \alpha \right) \mathbf{B} \\
\vec{p} &= \left( \alpha \mathbf{T} +  \left( 1 - \alpha \right) \mathbf{B} \right) \vec{p}\\
&= \alpha \mathbf{T}\vec{p} +  \left( 1-\alpha \right) \mathbf{B} \vec{p}
\end{align}

<p>
Let \(\mathbf{F}= \mathbf{B}\vec{p}\), consider the value of \(\mathbf{F}\) :
</p>

\begin{align}
\mathbf{F} &=
\begin{bmatrix}
\frac{1}{N} & \frac{1}{N} & \ldots & \frac{1}{N} \\
\frac{1}{N} & \frac{1}{N} & \ldots & \frac{1}{N} \\
\vdots      & \vdots      & \ddots & \vdots \\
\frac{1}{N} & \frac{1}{N} & \ldots & \frac{1}{N} \\
\end{bmatrix}
\begin{bmatrix}
\vec{p_1} \\ \vec{p_2} \\ \vdots \\ \vec{p_m}
\end{bmatrix}  \\
&= \begin{bmatrix}
\left( \sum^{m}_{i= 0}   \left[ p_i \right]  \right) \times \frac{1}{N} \\
\left( \sum^{m}_{i= 0}   \left[ p_i \right]  \right) \times \frac{1}{N} \\
\vdots  \\
\left( \sum^{m}_{i= 0}   \left[ p_i \right]  \right) \times \frac{1}{N} \\
\end{bmatrix}  \\
& \text{Probabilities sum to 1 and hence:} \\
&= \begin{bmatrix}
\frac{1}{N} \\
\frac{1}{N} \\
\frac{1}{N} \\
\vdots  \\
\frac{1}{N} \\
\end{bmatrix}
\end{align}
<p>
So instead the power method can be implemented by performing an algorithm to the effect of:
</p>

<div class="org-src-container">
<pre class="src src-R"><span style="color: #cd853f;">## </span><span style="color: #cd853f;">Find Stationary point of random surfer</span>
N     <span style="color: #1e90ff;">&lt;-</span> nrow(A)
alpha <span style="color: #1e90ff;">&lt;-</span> <span style="color: #1e90ff;">0.8</span>
F     <span style="color: #1e90ff;">&lt;-</span> rep((<span style="color: #1e90ff;">1</span>-alpha)/N, nrow(A))  <span style="color: #cd853f;">## </span><span style="color: #cd853f;">A nx1 vector of (1-alpha)/N</span>

<span style="color: #cd853f;">## </span><span style="color: #cd853f;">Solve using the power method</span>
p     <span style="color: #1e90ff;">&lt;-</span> rep(<span style="color: #1e90ff;">0</span>, length.out = ncol(T)); p[<span style="color: #1e90ff;">1</span>] <span style="color: #1e90ff;">&lt;-</span> <span style="color: #1e90ff;">1</span>
p_new <span style="color: #1e90ff;">&lt;-</span> alpha*T <span style="color: #1e90ff;">%*%</span> p + F

<span style="color: #cd853f;">## </span><span style="color: #cd853f;">use a Counter to debug</span>
i <span style="color: #1e90ff;">&lt;-</span> <span style="color: #1e90ff;">0</span>
<span style="color: #20b2aa; font-weight: bold;">while</span> (sum(round(p, <span style="color: #1e90ff;">9</span>) != round(p_new, <span style="color: #1e90ff;">9</span>))) {
    p     <span style="color: #1e90ff;">&lt;-</span> p_new
    p_new <span style="color: #1e90ff;">&lt;-</span> alpha*T <span style="color: #1e90ff;">%*%</span> p + F
    (i <span style="color: #1e90ff;">&lt;-</span> i+<span style="color: #1e90ff;">1</span>) <span style="color: #1e90ff;">%&gt;%</span> print()
}

p <span style="color: #1e90ff;">%&gt;%</span> head() <span style="color: #1e90ff;">%&gt;%</span> print()
</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Ryan Greenup</p>
<p class="date">Created: 2020-08-07 Fri 17:27</p>
</div>
</body>
</html>
